<?xml version="1.0"?>
<!--

This file shall be properly set for user authentication and authorization leveraging the OpenID Connect protocol.
Here we provide a quick reference for configuration setters, and we provide a complete documentation
at the following page:

    https://galaxyproject.org/authnz/config/oidc/



Quick Reference
_______________

- provider:         Sets the name of OpenID Connect (OIDC) Identity Provider (IdP).
                    The following IdPs are currently supported:

                        { "Google", "Globus" }

- client id:        Sets the id of this client (i.e., your Galaxy instance) with the IdP, which is
                    obtained from the IdP at client registration.
                    See: https://tools.ietf.org/html/rfc6749#section-2.2

- client secret:    A secret generated by IdP for your client upon its registration.
                    See https://tools.ietf.org/html/rfc6749#section-2.3.1



IMPORTANT NOTES
_______________

While registering your client (i.e., your Galaxy instance), you would need to provide the IdP with a
`redirect_uri`: a URL at which the IdP will callback your Galaxy instance upon a successful user authentication.

This URL for your Galaxy instance is composed as:

    <host_url>/authnz/<provider>/callback


Some examples:

- using localhost to authenticate with Google:
    http://localhost:8080/authnz/google/callback

- using localhost to authenticate with Globus:
    http://localhost:8080/authnz/globus/callback

- using an instance hosted at `https://usegalaxy.org` with Google:
    https://usegalaxy.org/authnz/google/callback


Please mind `http` and `https`.

-->
<OIDC>
    <provider name="Keycloak">
        <!-- The URL should include the base keycloak path as well as the realm -->
        <url>https://accounts.dev.d4science.org/auth/realms/d4science/</url>
        <client_id>galaxy-test</client_id>
        <client_secret></client_secret>
        <redirect_uri>http://localhost:8080/authnz/keycloak/callback</redirect_uri>
        <!-- (Optional) Trusted CA certificate file or directory to use when verify Custos authorization server.
             See http://docs.python-requests.org/en/master/user/advanced/#ssl-cert-verification for more information. -->
        <!-- <ca_bundle>/path/to/ca_bundle</ca_bundle> -->
        <!-- (Optional) Override the default Custos well-known URL to point to a different instance -->
        <!-- <well_known_oidc_config_uri>https://.../.well-known/openid-configuration</well_known_oidc_config_uri> -->
        <!-- (Optional) Override the default idp hint -->
        <!-- <idphint>cilogon</idphint> -->
        <!-- (Optional) Enable logging out of the IDP when user logs out of Galaxy -->
        <!-- <enable_idp_logout>false</enable_idp_logout> -->
        <icon>https://upload.wikimedia.org/wikipedia/commons/2/29/Keycloak_Logo.png</icon>
    </provider>
</OIDC>
